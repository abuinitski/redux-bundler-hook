{"version":3,"file":"index.umd.js","sources":["src/ReduxBundlerContext.js","src/index.js","src/useConnect.js"],"sourcesContent":["import React from 'react'\n\nexport default React.createContext(null)\n","import React from 'react'\n\nimport ReduxBundlerContext from './ReduxBundlerContext'\n\nexport { default as useConnect } from './useConnect'\n\nexport const ReduxBundlerProvider = ({ store, children }) =>\n  React.createElement(ReduxBundlerContext.Provider, { value: { store } }, children)\n","import { useContext, useEffect, useState, useMemo, useRef } from 'react'\n\nimport ReduxBundlerContext from './ReduxBundlerContext'\n\nexport default function useConnect(...args) {\n  const { store } = useContext(ReduxBundlerContext)\n\n  const [keysToWatch, actions] = useMemo(() => cookArguments(store, args), args)\n\n  const [state, setState] = useState(() => store.select(keysToWatch))\n\n  const prevKeysToWatchRef = useRef(keysToWatch)\n\n  useEffect(() => {\n    if (prevKeysToWatchRef.current !== keysToWatch) {\n      prevKeysToWatchRef.current = keysToWatch\n      setState(store.select(keysToWatch))\n    }\n\n    return store.subscribeToSelectors(keysToWatch, changes => {\n      setState(currentState => ({ ...currentState, ...changes }))\n    })\n  }, [keysToWatch])\n\n  if (prevKeysToWatchRef.current !== keysToWatch) {\n    return {\n      ...actions,\n      ...store.select(keysToWatch)\n    }\n  }\n\n  return {\n    ...actions,\n    ...state,\n  }\n}\n\nfunction cookArguments(store, args) {\n  const keysToWatch = []\n  const actions = {}\n\n  args.forEach(keyName => {\n    if (keyName.slice(0, 6) === 'select') {\n      keysToWatch.push(keyName)\n      return\n    }\n\n    if (keyName.slice(0, 2) === 'do') {\n      actions[keyName] = (...args) => {\n        if (store.action) {\n          return store.action(keyName, args)\n        }\n        return store[keyName](...args)\n      }\n      return\n    }\n\n    throw Error(`Can Not Connect: ${keyName}`)\n  })\n\n  return [keysToWatch, actions]\n}\n"],"names":["React","createContext","createElement","ReduxBundlerContext","Provider","value","store","children","args","useContext","useMemo","keysToWatch","actions","forEach","keyName","slice","Error","action","push","cookArguments","useState","select","state","setState","prevKeysToWatchRef","useRef","useEffect","current","subscribeToSelectors","changes","currentState"],"mappings":"2PAEeA,EAAMC,cAAc,22BCIC,mBAClCD,EAAME,cAAcC,EAAoBC,SAAU,CAAEC,MAAO,CAAEC,QADxBA,UAAOC,0ECFRC,2BAAAA,cAC5BF,EAAUG,aAAWN,GAArBG,UAEuBI,UAAQ,kBA8BzC,SAAuBJ,EAAOE,OACtBG,EAAc,GACdC,EAAU,UAEhBJ,EAAKK,QAAQ,SAAAC,MACiB,WAAxBA,EAAQC,MAAM,EAAG,OAKO,OAAxBD,EAAQC,MAAM,EAAG,SAUfC,iCAA0BF,IAT9BF,EAAQE,GAAW,kDAAIN,2BAAAA,iBACjBF,EAAMW,OACDX,EAAMW,OAAOH,EAASN,GAExBF,EAAMQ,SAANR,EAAkBE,SAT3BG,EAAYO,KAAKJ,KAiBd,CAACH,EAAaC,GArDwBO,CAAcb,EAAOE,IAAOA,MAAlEG,OAAaC,WAEMQ,WAAS,kBAAMd,EAAMe,OAAOV,QAA/CW,OAAOC,OAERC,EAAqBC,SAAOd,UAElCe,YAAU,kBACJF,EAAmBG,UAAYhB,IACjCa,EAAmBG,QAAUhB,EAC7BY,EAASjB,EAAMe,OAAOV,KAGjBL,EAAMsB,qBAAqBjB,EAAa,SAAAkB,GAC7CN,EAAS,SAAAO,eAAsBA,EAAiBD,QAEjD,CAAClB,SAIGC,EAFHY,EAAmBG,UAAYhB,EAG5BL,EAAMe,OAAOV,GAMfW"}