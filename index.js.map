{"version":3,"file":"index.js","sources":["src/ReduxBundlerContext.js","src/index.js","src/useConnect.js"],"sourcesContent":["import React from 'react'\n\nexport default React.createContext(null)\n","import React from 'react'\n\nimport ReduxBundlerContext from './ReduxBundlerContext'\n\nexport { default as useConnect } from './useConnect'\n\nexport const ReduxBundlerProvider = ({ store, children }) =>\n  React.createElement(ReduxBundlerContext.Provider, { value: { store } }, children)\n","import { useContext, useEffect, useState, useMemo } from 'react'\n\nimport ReduxBundlerContext from './ReduxBundlerContext'\n\nexport default function useConnect(...args) {\n  const { store } = useContext(ReduxBundlerContext)\n\n  const [keysToWatch, actions] = useMemo(() => cookArguments(store, args), args)\n\n  const [state, setState] = useState(() => store.select(keysToWatch))\n\n  useEffect(\n    () =>\n      store.subscribeToSelectors(keysToWatch, changes => {\n        setState(currentState => ({ ...currentState, ...changes }))\n      }),\n    [keysToWatch]\n  )\n\n  return {\n    ...actions,\n    ...state,\n  }\n}\n\nfunction cookArguments(store, args) {\n  const keysToWatch = []\n  const actions = {}\n\n  args.forEach(keyName => {\n    if (keyName.slice(0, 6) === 'select') {\n      keysToWatch.push(keyName)\n      return\n    }\n\n    if (keyName.slice(0, 2) === 'do') {\n      actions[keyName] = (...args) => {\n        if (store.action) {\n          return store.action(keyName, args)\n        }\n        return store[keyName](...args)\n      }\n      return\n    }\n\n    throw Error(`Can Not Connect: ${keyName}`)\n  })\n\n  return [keysToWatch, actions]\n}\n"],"names":["React","createContext","ref","createElement","ReduxBundlerContext","Provider","value","useContext","useMemo","store","args","keysToWatch","actions","forEach","keyName","slice","Error","action","push","cookArguments","useState","select","useEffect","subscribeToSelectors","changes","setState","currentState","Object"],"mappings":"kFAEeA,EAAMC,cAAc,4CCIEC,UACnCF,EAAMG,cAAcC,EAAoBC,SAAU,CAAEC,MAAO,yHCFzCC,aAAWH,WAEEI,4BAkBjC,SAAuBC,EAAOC,OACtBC,EAAc,GACdC,EAAU,UAEhBF,EAAKG,iBAAQC,MACiB,WAAxBA,EAAQC,MAAM,EAAG,OAKO,OAAxBD,EAAQC,MAAM,EAAG,SAUfC,0BAA0BF,GAT9BF,EAAQE,4EACFL,EAAMQ,OACDR,EAAMQ,OAAOH,EAASJ,GAExBD,EAAMK,SAASL,EAAGC,SAT3BC,EAAYO,KAAKJ,KAiBd,CAACH,EAAaC,GAzCwBO,CAAcV,EAAOC,IAAOA,mBAE/CU,6BAAeX,EAAMY,OAAOV,0BAEtDW,8BAEIb,EAAMc,qBAAqBZ,WAAaa,GACtCC,WAASC,UAAiBC,iBAAKD,EAAiBF,QAEpD,CAACb,IAGIgB,iBACFf"}