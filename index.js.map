{"version":3,"file":"index.js","sources":["src/ReduxBundlerContext.js","src/ReduxBundlerProvider.js","src/useConnect.js","src/useReduxBundlerStore.js"],"sourcesContent":["import React from 'react'\n\nexport default React.createContext({ store: null })\n","import React from 'react'\n\nimport ReduxBundlerContext from './ReduxBundlerContext'\n\nexport default function ReduxBundlerProvider({ store, children }) {\n  return React.createElement(ReduxBundlerContext.Provider, { value: { store } }, children)\n}\n","import { useContext, useEffect, useState, useMemo, useRef } from 'react'\n\nimport ReduxBundlerContext from './ReduxBundlerContext'\n\nexport default function useConnect(...args) {\n  const { store } = useContext(ReduxBundlerContext)\n\n  const [keysToWatch, actions] = useMemo(() => cookArguments(store, args), args)\n\n  const [state, setState] = useState(() => store.select(keysToWatch))\n\n  const prevKeysToWatchRef = useRef(keysToWatch)\n\n  useEffect(() => {\n    if (prevKeysToWatchRef.current !== keysToWatch) {\n      prevKeysToWatchRef.current = keysToWatch\n      setState(store.select(keysToWatch))\n    }\n\n    return store.subscribeToSelectors(keysToWatch, changes => {\n      setState(currentState => ({ ...currentState, ...changes }))\n    })\n  }, [keysToWatch])\n\n  if (prevKeysToWatchRef.current !== keysToWatch) {\n    return {\n      ...actions,\n      ...store.select(keysToWatch),\n    }\n  }\n\n  return {\n    ...actions,\n    ...state,\n  }\n}\n\nfunction cookArguments(store, args) {\n  const keysToWatch = []\n  const actions = {}\n\n  args.forEach(keyName => {\n    if (keyName.slice(0, 6) === 'select') {\n      keysToWatch.push(keyName)\n      return\n    }\n\n    if (keyName.slice(0, 2) === 'do') {\n      actions[keyName] = (...args) => {\n        if (store.action) {\n          return store.action(keyName, args)\n        }\n        return store[keyName](...args)\n      }\n      return\n    }\n\n    throw Error(`Can Not Connect: ${keyName}`)\n  })\n\n  return [keysToWatch, actions]\n}\n","import { useContext } from 'react'\n\nimport { ReduxBundlerContext } from './index'\n\nexport default function useReduxBundlerStore() {\n  return useContext(ReduxBundlerContext).store\n}\n"],"names":["React","createContext","store","createElement","ReduxBundlerContext","Provider","value","children","args","useContext","useMemo","keysToWatch","actions","forEach","keyName","slice","Error","action","push","cookArguments","useState","select","state","setState","prevKeysToWatchRef","useRef","useEffect","current","subscribeToSelectors","changes","currentState"],"mappings":"kFAEeA,EAAMC,cAAc,CAAEC,MAAO,g5BCE7B,mBACNF,EAAMG,cAAcC,EAAoBC,SAAU,CAAEC,MAAO,CAAEJ,QADvBA,UAAOK,gFCAhBC,2BAAAA,cAC5BN,EAAUO,aAAWL,GAArBF,UAEuBQ,UAAQ,kBA8BzC,SAAuBR,EAAOM,OACtBG,EAAc,GACdC,EAAU,UAEhBJ,EAAKK,QAAQ,SAAAC,MACiB,WAAxBA,EAAQC,MAAM,EAAG,OAKO,OAAxBD,EAAQC,MAAM,EAAG,SAUfC,iCAA0BF,IAT9BF,EAAQE,GAAW,kDAAIN,2BAAAA,iBACjBN,EAAMe,OACDf,EAAMe,OAAOH,EAASN,GAExBN,EAAMY,SAANZ,EAAkBM,SAT3BG,EAAYO,KAAKJ,KAiBd,CAACH,EAAaC,GArDwBO,CAAcjB,EAAOM,IAAOA,MAAlEG,OAAaC,WAEMQ,WAAS,kBAAMlB,EAAMmB,OAAOV,QAA/CW,OAAOC,OAERC,EAAqBC,SAAOd,UAElCe,YAAU,kBACJF,EAAmBG,UAAYhB,IACjCa,EAAmBG,QAAUhB,EAC7BY,EAASrB,EAAMmB,OAAOV,KAGjBT,EAAM0B,qBAAqBjB,EAAa,SAAAkB,GAC7CN,EAAS,SAAAO,eAAsBA,EAAiBD,QAEjD,CAAClB,SAIGC,EAFHY,EAAmBG,UAAYhB,EAG5BT,EAAMmB,OAAOV,GAMfW,mDC5BEb,aAAWL,GAAqBF"}