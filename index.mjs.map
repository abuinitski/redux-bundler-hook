{"version":3,"file":"index.mjs","sources":["src/ReduxBundlerContext.js","src/useConnect.js","src/index.js"],"sourcesContent":["import React from 'react'\n\nexport default React.createContext(null)\n","import { useContext, useEffect, useState, useMemo } from 'react'\n\nimport ReduxBundlerContext from './ReduxBundlerContext'\n\nexport default function useConnect(...args) {\n  const { store } = useContext(ReduxBundlerContext)\n\n  const [keysToWatch, actions] = useMemo(() => cookArguments(store, args), args)\n\n  const [state, setState] = useState(() => store.select(keysToWatch))\n\n  useEffect(\n    () =>\n      store.subscribeToSelectors(keysToWatch, changes => {\n        setState(currentState => ({ ...currentState, ...changes }))\n      }),\n    [keysToWatch]\n  )\n\n  return {\n    ...actions,\n    ...state,\n  }\n}\n\nfunction cookArguments(store, args) {\n  const keysToWatch = []\n  const actions = {}\n\n  args.forEach(keyName => {\n    if (keyName.slice(0, 6) === 'select') {\n      keysToWatch.push(keyName)\n      return\n    }\n\n    if (keyName.slice(0, 2) === 'do') {\n      actions[keyName] = (...args) => {\n        if (store.action) {\n          return store.action(keyName, args)\n        }\n        return store[keyName](...args)\n      }\n      return\n    }\n\n    throw Error(`Can Not Connect: ${keyName}`)\n  })\n\n  return [keysToWatch, actions]\n}\n","import React from 'react'\n\nimport ReduxBundlerContext from './ReduxBundlerContext'\n\nexport { default as useConnect } from './useConnect'\n\nexport const ReduxBundlerProvider = ({ store, children }) =>\n  React.createElement(ReduxBundlerContext.Provider, { value: { store } }, children)\n"],"names":["React","createContext","useConnect","useContext","ReduxBundlerContext","useMemo","store","args","keysToWatch","actions","forEach","keyName","slice","Error","action","push","cookArguments","useState","select","useEffect","subscribeToSelectors","changes","setState","currentState","Object","ReduxBundlerProvider","ref","createElement","Provider","value"],"mappings":"gFAEA,MAAeA,EAAMC,cAAc,eCEXC,iEACJC,EAAWC,WAEEC,oBAkBjC,SAAuBC,EAAOC,OACtBC,EAAc,GACdC,EAAU,UAEhBF,EAAKG,iBAAQC,MACiB,WAAxBA,EAAQC,MAAM,EAAG,OAKO,OAAxBD,EAAQC,MAAM,EAAG,SAUfC,0BAA0BF,GAT9BF,EAAQE,4EACFL,EAAMQ,OACDR,EAAMQ,OAAOH,EAASJ,GAExBD,EAAMK,SAASL,EAAGC,SAT3BC,EAAYO,KAAKJ,KAiBd,CAACH,EAAaC,GAzCwBO,CAAcV,EAAOC,IAAOA,mBAE/CU,oBAAeX,EAAMY,OAAOV,0BAEtDW,oBAEIb,EAAMc,qBAAqBZ,WAAaa,GACtCC,WAASC,UAAiBC,iBAAKD,EAAiBF,QAEpD,CAACb,IAGIgB,iBACFf,SCdMgB,WAAwBC,UACnC1B,EAAM2B,cAAcvB,EAAoBwB,SAAU,CAAEC,MAAO"}